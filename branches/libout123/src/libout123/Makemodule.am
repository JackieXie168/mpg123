# Module for non-recursive mpg123 build system.

include src/libout123/modules/Makemodule.am

# Precursor to the proper libout123.
# For now only wrapping the module loader or the legacy module.
noinst_LTLIBRARIES += src/libout123/libmodule.la

lib_LTLIBRARIES += src/libout123/libout123.la
src_libout123_libout123_la_SOURCES =
src_libout123_libout123_la_LIBADD = \
  src/libout123/libmodule.la \
  src/libout123/modules/libdefaultmodule.la

src_libout123_libmodule_la_SOURCES = src/libout123/module.h
 
if HAVE_MODULES

src_libout123_libmodule_la_SOURCES += src/libout123/module.c
src_libout123_libmodule_la_LIBADD = -lltdl

else

src_libout123_libmodule_la_SOURCES += src/libout123/legacy_module.c

endif

# TODO: actually turn the stuff into a library.
